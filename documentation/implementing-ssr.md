## The requirements

- [x] The widget will be a Gutenberg block that allows it to be placed on any page or post.

The boilerplate code for the block was [developed ](https://developer.wordpress.org/block-editor/handbook/tutorials/create-block/#quick-start) by using the [@wordpress/create-block package](https://www.npmjs.com/package/@wordpress/create-block)

```
npx @wordpress/create-block
```

- [x] The widget must only show the current temperature of a given zip code.

The design of the temperate mimics the design on the openweathermap.org website.

- [x] The title of the widget can be set with a block attribute.

The title of the ama weather block was added as an attribute to the **block.json** file.

It was configured in the editor in the [block panel](https://developer.wordpress.org/block-editor/reference-guides/components/panel/).

- [x] The widget will look the same whether you are in the post editor or on the front end of the site.

  The contents in the front of the site depend on the function called by the **render_callback** property of register_block_type; so, [ServerSideRender](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-server-side-render/) was used to provide the same look on the frontend and in the editor on the backend.

- [x] Weather data must be retrieved through the API from https://openweathermap.org/current
      To get data from the API the plugin uses the zipcode route http://api.openweathermap.org/data/2.5/weather?zip={zipcode}&appid={apikey}

## Technical requirements

- [x] The desired zip code and API key should be saved in a settings page on the WP admin. Please use the WP Settings API.

- [ ] When retrieving the current weather data in the post editor, use a custom REST API route.

The data is retrieved from the openweathermap API via a link auto-generated from the API key and the zip code stored in the plugin settings.

http://api.openweathermap.org/data/2.5/weather?zip={zipcode}&appid={apikey}

The function **get_weather_data()** (\inc\get-weather-data.php), handles retrieving the data from the openweathermap API.

[ServerSideRender](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-server-side-render/) was used in the editor, therefore it was not necessary to use [register_rest_route](https://developer.wordpress.org/reference/functions/register_rest_route/) to create a custom route that would make an additional call to the network.

Instead [ServerSideRender](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-server-side-render/) uses the **get_weather_data()** function to retrieve the weather data.

# Note:

I have created another branch called **moyarich-feat-weather-render-from-custom-rest-api-route** that will cover this technical requirement.

- [x] The weather data should be stored in a transient after retrieval to reduce the number of external API calls.

  The name of the transient is generated by the **Ama_Weather class** (inc/class-ama-weather.php).

  The transient is utilized in the **get_weather_data()** function
