## The requirements

- [x] The widget will be a Gutenberg block that allows it to be placed on any page or post.

The boilerplate code for the block was [developed ](https://developer.wordpress.org/block-editor/handbook/tutorials/create-block/#quick-start) by using the [@wordpress/create-block package](https://www.npmjs.com/package/@wordpress/create-block)

```
npx @wordpress/create-block
```

- [x] The widget must only show the current temperature of a given zip code.

The design of the temperature mimics the design on the openweathermap.org website.

- [x] The title of the widget can be set with a block attribute.

The title of the ama weather block was added as an attribute to the **block.json** file.

The title was not placed in the editor's [block panel](https://developer.wordpress.org/block-editor/reference-guides/components/panel/).
Instead, it was created as a RichText component, giving the block user more control over how the title gets displayed on frontend.

- [x] The widget will look the same whether you are in the post editor or on the front end of the site.

### There were two options for displaying the data in the editor,

1. Get the weather HTML code from the server using the custom rest route,
2. Get the weather JSON data, then build the html using react components.

**I chose option 2**

The PHP code for rendering the HTML block on the frontend is stored in the forecast.php file.

The HTML code for rendering the block in the editor is stored in the Forecast.js component.

- [x] Weather data must be retrieved through the API from https://openweathermap.org/current
      To get data from the API the plugin uses the zipcode route http://api.openweathermap.org/data/2.5/weather?zip={zipcode}&appid={apikey}

## Technical requirements

- [x] The desired zip code and API key should be saved in a settings page on the WP admin. Please use the WP Settings API.

- [x] When retrieving the current weather data in the post editor, use a custom REST API route.

The data is retrieved from the openweathermap API via a link auto-generated from the API key and the zip code taken from the plugin settings.

http://api.openweathermap.org/data/2.5/weather?zip={zipcode}&appid={apikey}

The Plugin uses [register_rest_route](https://developer.wordpress.org/reference/functions/register_rest_route/) to create a custom route that gets the weather data from the server.

Endpoint: /wp-json/ama-weather/v1/zipcode/

**http://localhost/wp-json/ama-weather/v1/zipcode/**

The custom route uses the function **get_weather_data()** (\inc\get-weather-data.php), to retrieve the data from the openweathermap API.

The editor uses the Openweather.js React component to display the weather on the backend

- [x] The weather data should be stored in a transient after retrieval to reduce the number of external API calls.

  The name of the transient is generated by the **Ama_Weather class** (inc/class-ama-weather.php).

  The transient is utilized in the **get_weather_data()** function
